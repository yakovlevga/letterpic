{"version":3,"file":"letterpic.min.js","sources":["../src/defaults.ts","../src/md5.ts","../src/helpers.ts","../src/letterpic.ts","../src/providers/palette.ts","../src/providers/gradient.ts","../src/providers/color.ts"],"sourcesContent":["import { LetterPicSettings } from 'types/core';\r\n\r\nexport const defaultColors = [\r\n  '#f44336',\r\n  '#673ab7',\r\n  '#03a9f4',\r\n  '#4caf50',\r\n  '#ffeb3b',\r\n  '#ff5722',\r\n  '#607d8b',\r\n  '#e91e63',\r\n  '#3f51b5',\r\n  '#00bcd4',\r\n  '#8bc34a',\r\n  '#ffc107',\r\n  '#795548',\r\n  '#2196f3',\r\n  '#009688',\r\n  '#cddc39',\r\n  '#ff9800',\r\n  '#9e9e9e',\r\n  '#1abc9c',\r\n  '#2ecc71',\r\n  '#3498db',\r\n  '#9b59b6',\r\n  '#34495e',\r\n  '#16a085',\r\n  '#27ae60',\r\n  '#2980b9',\r\n  '#8e44ad',\r\n  '#f1c40f',\r\n  '#e67e22',\r\n  '#e74c3c',\r\n  '#ecf0f1',\r\n  '#95a5a6',\r\n  '#f39c12',\r\n  '#d35400',\r\n  '#c0392b',\r\n];\r\n\r\nexport const LETTER_PIC_DEFAULTS: LetterPicSettings = {\r\n  fill: 'gradient',\r\n  size: 100,\r\n  font: 'Arial',\r\n  fontColor: '#fff',\r\n  fontStrokeColor: '#000',\r\n  fontSize: 0.45,\r\n  maxInitialsLength: 2,\r\n};\r\n","/**\n * Credit http://www.myersdaily.org/joseph/javascript/md5-text.html\n */\n\nfunction md5cycle(x: any, k: any) {\n  var a = x[0],\n    b = x[1],\n    c = x[2],\n    d = x[3];\n\n  a = ff(a, b, c, d, k[0], 7, -680876936);\n  d = ff(d, a, b, c, k[1], 12, -389564586);\n  c = ff(c, d, a, b, k[2], 17, 606105819);\n  b = ff(b, c, d, a, k[3], 22, -1044525330);\n  a = ff(a, b, c, d, k[4], 7, -176418897);\n  d = ff(d, a, b, c, k[5], 12, 1200080426);\n  c = ff(c, d, a, b, k[6], 17, -1473231341);\n  b = ff(b, c, d, a, k[7], 22, -45705983);\n  a = ff(a, b, c, d, k[8], 7, 1770035416);\n  d = ff(d, a, b, c, k[9], 12, -1958414417);\n  c = ff(c, d, a, b, k[10], 17, -42063);\n  b = ff(b, c, d, a, k[11], 22, -1990404162);\n  a = ff(a, b, c, d, k[12], 7, 1804603682);\n  d = ff(d, a, b, c, k[13], 12, -40341101);\n  c = ff(c, d, a, b, k[14], 17, -1502002290);\n  b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n  a = gg(a, b, c, d, k[1], 5, -165796510);\n  d = gg(d, a, b, c, k[6], 9, -1069501632);\n  c = gg(c, d, a, b, k[11], 14, 643717713);\n  b = gg(b, c, d, a, k[0], 20, -373897302);\n  a = gg(a, b, c, d, k[5], 5, -701558691);\n  d = gg(d, a, b, c, k[10], 9, 38016083);\n  c = gg(c, d, a, b, k[15], 14, -660478335);\n  b = gg(b, c, d, a, k[4], 20, -405537848);\n  a = gg(a, b, c, d, k[9], 5, 568446438);\n  d = gg(d, a, b, c, k[14], 9, -1019803690);\n  c = gg(c, d, a, b, k[3], 14, -187363961);\n  b = gg(b, c, d, a, k[8], 20, 1163531501);\n  a = gg(a, b, c, d, k[13], 5, -1444681467);\n  d = gg(d, a, b, c, k[2], 9, -51403784);\n  c = gg(c, d, a, b, k[7], 14, 1735328473);\n  b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n  a = hh(a, b, c, d, k[5], 4, -378558);\n  d = hh(d, a, b, c, k[8], 11, -2022574463);\n  c = hh(c, d, a, b, k[11], 16, 1839030562);\n  b = hh(b, c, d, a, k[14], 23, -35309556);\n  a = hh(a, b, c, d, k[1], 4, -1530992060);\n  d = hh(d, a, b, c, k[4], 11, 1272893353);\n  c = hh(c, d, a, b, k[7], 16, -155497632);\n  b = hh(b, c, d, a, k[10], 23, -1094730640);\n  a = hh(a, b, c, d, k[13], 4, 681279174);\n  d = hh(d, a, b, c, k[0], 11, -358537222);\n  c = hh(c, d, a, b, k[3], 16, -722521979);\n  b = hh(b, c, d, a, k[6], 23, 76029189);\n  a = hh(a, b, c, d, k[9], 4, -640364487);\n  d = hh(d, a, b, c, k[12], 11, -421815835);\n  c = hh(c, d, a, b, k[15], 16, 530742520);\n  b = hh(b, c, d, a, k[2], 23, -995338651);\n\n  a = ii(a, b, c, d, k[0], 6, -198630844);\n  d = ii(d, a, b, c, k[7], 10, 1126891415);\n  c = ii(c, d, a, b, k[14], 15, -1416354905);\n  b = ii(b, c, d, a, k[5], 21, -57434055);\n  a = ii(a, b, c, d, k[12], 6, 1700485571);\n  d = ii(d, a, b, c, k[3], 10, -1894986606);\n  c = ii(c, d, a, b, k[10], 15, -1051523);\n  b = ii(b, c, d, a, k[1], 21, -2054922799);\n  a = ii(a, b, c, d, k[8], 6, 1873313359);\n  d = ii(d, a, b, c, k[15], 10, -30611744);\n  c = ii(c, d, a, b, k[6], 15, -1560198380);\n  b = ii(b, c, d, a, k[13], 21, 1309151649);\n  a = ii(a, b, c, d, k[4], 6, -145523070);\n  d = ii(d, a, b, c, k[11], 10, -1120210379);\n  c = ii(c, d, a, b, k[2], 15, 718787259);\n  b = ii(b, c, d, a, k[9], 21, -343485551);\n\n  x[0] = add32(a, x[0]);\n  x[1] = add32(b, x[1]);\n  x[2] = add32(c, x[2]);\n  x[3] = add32(d, x[3]);\n}\n\nfunction cmn(q: any, a: any, b: any, x: any, s: any, t: any) {\n  a = add32(add32(a, q), add32(x, t));\n  return add32((a << s) | (a >>> (32 - s)), b);\n}\n\nfunction ff(a: any, b: any, c: any, d: any, x: any, s: any, t: any) {\n  return cmn((b & c) | (~b & d), a, b, x, s, t);\n}\n\nfunction gg(a: any, b: any, c: any, d: any, x: any, s: any, t: any) {\n  return cmn((b & d) | (c & ~d), a, b, x, s, t);\n}\n\nfunction hh(a: any, b: any, c: any, d: any, x: any, s: any, t: any) {\n  return cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction ii(a: any, b: any, c: any, d: any, x: any, s: any, t: any) {\n  return cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nfunction md51(s: string) {\n  // var txt = '';\n  var n = s.length,\n    state = [1732584193, -271733879, -1732584194, 271733878],\n    i;\n  for (i = 64; i <= s.length; i += 64) {\n    md5cycle(state, md5blk(s.substring(i - 64, i)));\n  }\n  s = s.substring(i - 64);\n  var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  for (i = 0; i < s.length; i++)\n    tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n  tail[i >> 2] |= 0x80 << (i % 4 << 3);\n  if (i > 55) {\n    md5cycle(state, tail);\n    for (i = 0; i < 16; i++) tail[i] = 0;\n  }\n  tail[14] = n * 8;\n  md5cycle(state, tail);\n  return state;\n}\n\n/* there needs to be support for Unicode here,\n * unless we pretend that we can redefine the MD-5\n * algorithm for multi-byte characters (perhaps\n * by adding every four 16-bit characters and\n * shortening the sum to 32 bits). Otherwise\n * I suggest performing MD-5 as if every character\n * was two bytes--e.g., 0040 0025 = @%--but then\n * how will an ordinary MD-5 sum be matched?\n * There is no way to standardize text to something\n * like UTF-8 before transformation; speed cost is\n * utterly prohibitive. The JavaScript standard\n * itself needs to look at this: it should start\n * providing access to strings as preformed UTF-8\n * 8-bit unsigned value arrays.\n */\nfunction md5blk(s: string) {\n  /* I figured global was faster.   */\n  var md5blks = [],\n    i; /* Andy King said do it this way. */\n  for (i = 0; i < 64; i += 4) {\n    md5blks[i >> 2] =\n      s.charCodeAt(i) +\n      (s.charCodeAt(i + 1) << 8) +\n      (s.charCodeAt(i + 2) << 16) +\n      (s.charCodeAt(i + 3) << 24);\n  }\n  return md5blks;\n}\n\nvar hex_chr = '0123456789abcdef'.split('');\n\nfunction rhex(n: any) {\n  var s = '',\n    j = 0;\n  for (; j < 4; j++)\n    s += hex_chr[(n >> (j * 8 + 4)) & 0x0f] + hex_chr[(n >> (j * 8)) & 0x0f];\n  return s;\n}\n\nfunction hex(x: any) {\n  for (var i = 0; i < x.length; i++) x[i] = rhex(x[i]);\n  return x.join('');\n}\n\nfunction md5(s: string) {\n  return hex(md51(s));\n}\n\n/* this function is much faster,\n  so if possible we use it. Some IEs\n  are the only ones I know of that\n  need the idiotic second function,\n  generated by an if clause.  */\n\nvar add32 = function (a: any, b: any) {\n  return (a + b) & 0xffffffff;\n};\n\nif (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {\n  add32 = function (x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff),\n      msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xffff);\n  };\n}\n\nexport const md5hash = (s: string) => md5(s);\n","import { defaultColors } from 'defaults';\r\nimport { md5hash } from 'md5';\r\nimport { LetterPickFontSettings, LetterPicSettings } from 'types/core';\r\n\r\nexport const drawText = (\r\n  context: CanvasRenderingContext2D,\r\n  settings: LetterPickFontSettings,\r\n  text: string\r\n) => {\r\n  const { width, height } = context.canvas;\r\n  var fontSize = width * settings.fontSize;\r\n  context.font = `${fontSize}px ${settings.font}`;\r\n  context.textAlign = 'center';\r\n\r\n  var posX = width / 2;\r\n  var posY = (fontSize + height) * 0.45;\r\n\r\n  if (settings.fontStrokeColor) {\r\n    context.shadowColor = settings.fontStrokeColor;\r\n    context.shadowOffsetX = 0;\r\n    context.shadowOffsetY = 0;\r\n    context.shadowBlur = 3;\r\n  }\r\n\r\n  context.fillStyle = settings.fontColor;\r\n  context.fillText(text, posX, posY);\r\n};\r\n\r\nexport const getPreparedCanvasContext = (\r\n  settings: LetterPicSettings\r\n): CanvasRenderingContext2D => {\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = settings.size;\r\n  canvas.height = settings.size;\r\n  return canvas.getContext('2d')!;\r\n};\r\n\r\nexport const getInitials = (text: string) => {\r\n  var splitted = text.split(' ');\r\n  var result = splitted[0].charAt(0).toUpperCase();\r\n  for (var i = 1; i < 2; i++) {\r\n    if (splitted.length > i) {\r\n      result += splitted[i].charAt(0).toUpperCase();\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst stringToInteger = (s: string): number =>\r\n  parseInt(md5hash(s).substring(0, 8), 16);\r\n\r\nexport const getItemByString = <T>(s: string, arr: T[]): T => {\r\n  const idx = Math.abs(stringToInteger(s)) % arr.length;\r\n  return arr[idx];\r\n};\r\n\r\nexport const getRandomColorByString = (s: string) =>\r\n  `#${md5hash(s).substring(0, 6)}`;\r\n\r\nexport const getDefinedColorByString = (\r\n  settings: LetterPicSettings,\r\n  s: string\r\n) => {\r\n  const colors = settings.colors || defaultColors;\r\n  return getItemByString(s, colors);\r\n};\r\n","import {\r\n  LetterPicProvider,\r\n  LetterPicFillType,\r\n  LetterPicSettings,\r\n} from 'types/core';\r\nimport { LETTER_PIC_DEFAULTS } from 'defaults';\r\nimport { palette } from 'providers/palette';\r\nimport { gradient } from 'providers/gradient';\r\nimport { color } from 'providers/color';\r\n// import { bgProviderImage } from 'providers/bgProviderImage.ts1';\r\nimport { getInitials } from 'helpers';\r\n\r\nconst PROVIDERS: Record<LetterPicFillType, LetterPicProvider> = {\r\n  palette,\r\n  gradient,\r\n  color,\r\n};\r\n\r\nconst cache: Partial<Record<string, string>> = {};\r\n\r\nexport const draw = (\r\n  name: string,\r\n  userSettings?: Partial<LetterPicSettings>,\r\n  key: string = name\r\n) => {\r\n  const settingsWithDefaults: LetterPicSettings = {\r\n    ...LETTER_PIC_DEFAULTS,\r\n    ...userSettings,\r\n  };\r\n\r\n  const provider = PROVIDERS[settingsWithDefaults.fill];\r\n\r\n  const asCanvas = () => {\r\n    const initials = getInitials(name);\r\n    return provider(initials, key, settingsWithDefaults);\r\n  };\r\n\r\n  const asDataString = (): string => {\r\n    if (cache[key] === undefined) {\r\n      cache[key] = asCanvas().toDataURL();\r\n    }\r\n    return cache[key]!;\r\n  };\r\n\r\n  const asImage = () => {\r\n    const img = document.createElement('img');\r\n    img.src = asDataString();\r\n    return img;\r\n  };\r\n\r\n  const insureImg = (img: HTMLImageElement) => {\r\n    const imgErrorHandler = () => {\r\n      img.removeEventListener('error', imgErrorHandler);\r\n      img.src = asDataString();\r\n    };\r\n\r\n    const imgLoadHandler = () => {\r\n      img.removeEventListener('error', imgErrorHandler);\r\n      img.removeEventListener('load', imgLoadHandler);\r\n    };\r\n\r\n    img.addEventListener('error', imgErrorHandler);\r\n    img.addEventListener('load', imgLoadHandler);\r\n  };\r\n\r\n  return { asDataString, asImage, asCanvas, insureImg };\r\n};\r\n\r\n// function isImageOk(img: HTMLImageElement): boolean {\r\n//   if (!img.complete || (typeof img.naturalWidth !== \"undefined\" && img.naturalWidth === 0)) {\r\n//       return false;\r\n//   }\r\n//   return true;\r\n// }\r\n\r\n// $.fn.letterpic = function (options) {\r\n//     var self = this;\r\n//     self.$letterpics = [];\r\n//     self.options = options || {};\r\n\r\n//     var lp = new LetterPic(options);\r\n\r\n//     this.each(function () {\r\n//         var $el = $(this);\r\n\r\n//         if ($el.is(\"img\")) {\r\n//             if (!isImageOk($el[0])) {\r\n//                 var $canvas = replaceWithCanvas($el);\r\n//                 if(self.options.onImageError) {\r\n//                     self.options.onImageError($canvas, $el.attr('src'));\r\n//                 }\r\n//             }\r\n//             else {\r\n//                 $el.on(\"error\", onImageError);\r\n//             }\r\n//         }\r\n//         else {\r\n//             replaceWithCanvas($el);\r\n//         }\r\n//     });\r\n\r\n//     function getKey($el) {\r\n//         var key =\r\n//             $el.data().letterpicKey ||\r\n//             $el.data().letterpicUserId ||\r\n//             $el.data().userid ||\r\n//             getInitials($el);\r\n\r\n//         return key;\r\n//     }\r\n\r\n//     function getInitials($el) {\r\n//         var name = $el.attr(\"title\");\r\n\r\n//         var splitted = name.split(\" \");\r\n//         var result = splitted[0].charAt(0).toUpperCase();\r\n//         for(var i = 1; i < lp.settings.maxInitialsLength; i++) {\r\n//             if (splitted.length > i) {\r\n//                 result += splitted[i].charAt(0).toUpperCase();\r\n//             }\r\n//         }\r\n\r\n//         return result;\r\n//     }\r\n\r\n//     function isImageOk(img) {\r\n//         if (!img.complete || (typeof img.naturalWidth !== \"undefined\" && img.naturalWidth === 0)) {\r\n//             return false;\r\n//         }\r\n//         return true;\r\n//     }\r\n\r\n//     function onImageError(event) {\r\n//         var $img = $(event.target);\r\n//         $img.off(\"error\", onImageError);\r\n//         replaceWithCanvas($img, true);\r\n\r\n//         if(self.options.onImageError) {\r\n//             self.options.onImageError($canvas, $img.attr('src'));\r\n//         }\r\n//     }\r\n\r\n//     function replaceWithCanvas($el, isBrokenImage) {\r\n//         var $canvas;\r\n//         if ($el.is(\"canvas\")) {\r\n//             $canvas = $el;\r\n//         }\r\n//         else {\r\n//             $canvas = $(\"<canvas></canvas>\");\r\n//             $.each($el[0].attributes, function (i, attribute) {\r\n//                 $canvas.attr(attribute.name, attribute.value);\r\n//             });\r\n//             $el.replaceWith($canvas);\r\n//         }\r\n\r\n//         var key = getKey($canvas);\r\n//         var text = getInitials($canvas);\r\n//         lp.drawProvider.draw($canvas, key, text);\r\n\r\n//         self.$letterpics.push($canvas);\r\n\r\n//         if(self.options.onElementReplaced) {\r\n//             isBrokenImage = isBrokenImage || false;\r\n//             self.options.onElementReplaced($canvas, isBrokenImage);\r\n//         }\r\n\r\n//         return $canvas;\r\n//     }\r\n\r\n//     return $($.map(self.$letterpics, function($el){\r\n//         return $el.get();\r\n//     }));;\r\n// };\r\n","import {\r\n  drawText,\r\n  getDefinedColorByString,\r\n  getPreparedCanvasContext,\r\n} from 'helpers';\r\nimport type { LetterPicProvider, LetterPicSettings } from 'types/core';\r\n\r\nexport const palette: LetterPicProvider = (\r\n  text: string,\r\n  key: string,\r\n  settings: LetterPicSettings\r\n) => {\r\n  const context = getPreparedCanvasContext(settings);\r\n  context.fillStyle = getDefinedColorByString(settings, key);\r\n  context.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n  drawText(context, settings, text);\r\n  return context.canvas;\r\n};\r\n","import {\r\n  drawText,\r\n  getDefinedColorByString,\r\n  getItemByString,\r\n  getPreparedCanvasContext,\r\n  getRandomColorByString,\r\n} from 'helpers';\r\nimport type {\r\n  LetterPicGradient,\r\n  LetterPicProvider,\r\n  LetterPicSettings,\r\n} from 'types/core';\r\n\r\nconst getLinearGradient = (\r\n  context: CanvasRenderingContext2D,\r\n  colors: LetterPicGradient\r\n): CanvasGradient => {\r\n  const gradient = context.createLinearGradient(0, 0, 0, context.canvas.height);\r\n  var gradientStep = 1 / (colors.length - 1);\r\n  for (var i = 0; i < colors.length; i++) {\r\n    gradient.addColorStop(i * gradientStep, colors[i]);\r\n  }\r\n  return gradient;\r\n};\r\n\r\n// const reverseString = (s: string) => s.split('').reverse().join('');\r\n\r\nexport const gradient: LetterPicProvider = (\r\n  text: string,\r\n  key: string,\r\n  settings: LetterPicSettings\r\n) => {\r\n  const context = getPreparedCanvasContext(settings);\r\n\r\n  let gradient: LetterPicGradient;\r\n  if (settings.gradients !== undefined && settings.gradients.length > 0) {\r\n    gradient = getItemByString(key, settings.gradients);\r\n  } else {\r\n    const startColor = getDefinedColorByString(settings, key);\r\n    const endColor = getRandomColorByString(key); // getDefinedColorByString(settings, reverseString(key));\r\n    gradient = [startColor, endColor];\r\n  }\r\n\r\n  context.fillStyle = getLinearGradient(context, gradient);\r\n  context.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n  drawText(context, settings, text);\r\n  return context.canvas;\r\n};\r\n","import {\r\n  drawText,\r\n  getPreparedCanvasContext,\r\n  getRandomColorByString,\r\n} from 'helpers';\r\nimport type { LetterPicProvider, LetterPicSettings } from 'types/core';\r\n\r\nexport const color: LetterPicProvider = (\r\n  text: string,\r\n  key: string,\r\n  settings: LetterPicSettings\r\n) => {\r\n  const context = getPreparedCanvasContext(settings);\r\n  context.fillStyle = getRandomColorByString(key);\r\n  context.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n  drawText(context, settings, text);\r\n  return context.canvas;\r\n};\r\n"],"names":["defaultColors","LETTER_PIC_DEFAULTS","fill","size","font","fontColor","fontStrokeColor","fontSize","maxInitialsLength","md5cycle","x","k","a","ff","b","c","d","gg","hh","ii","add32","cmn","q","s","t","md51","n","length","state","i","md5blks","charCodeAt","md5blk","substring","tail","hex_chr","split","hex","j","rhex","join","md5","y","lsw","drawText","context","settings","text","width","_a","canvas","height","textAlign","posX","posY","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","fillText","getPreparedCanvasContext","document","createElement","getContext","getItemByString","arr","Math","abs","parseInt","md5hash","getRandomColorByString","getDefinedColorByString","colors","PROVIDERS","palette","key","fillRect","gradient","undefined","gradients","createLinearGradient","gradientStep","addColorStop","getLinearGradient","color","cache","name","userSettings","asCanvas","initials","splitted","result","charAt","toUpperCase","getInitials","provider","settingsWithDefaults","asDataString","toDataURL","asImage","img","src","insureImg","imgErrorHandler","removeEventListener","imgLoadHandler","addEventListener"],"mappings":"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"}